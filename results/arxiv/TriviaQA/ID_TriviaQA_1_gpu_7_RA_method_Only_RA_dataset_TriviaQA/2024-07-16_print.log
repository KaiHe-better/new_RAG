2024-07-16 22:51:38,019 **************** Configuration **************** 
2024-07-16 22:51:38,019 gpu: 7
2024-07-16 22:51:38,019 test_code_flag: False
2024-07-16 22:51:38,019 ID: TriviaQA_1
2024-07-16 22:51:38,019 seed: 42
2024-07-16 22:51:38,019 num_workers: 48
2024-07-16 22:51:38,019 loading_ckpt_path: None
2024-07-16 22:51:38,019 RA_method: Only_RA
2024-07-16 22:51:38,019 LLM: meta-llama/Meta-Llama-3-8B-Instruct
2024-07-16 22:51:38,019 dataset: TriviaQA
2024-07-16 22:51:38,019 train_batch_size: 8
2024-07-16 22:51:38,019 test_batch_size: 8
2024-07-16 22:51:38,019 accumulation_steps: 1
2024-07-16 22:51:38,019 demonstration: False
2024-07-16 22:51:38,019 demons_cnt: 1
2024-07-16 22:51:38,020 l2_coef: 0
2024-07-16 22:51:38,020 train_eval: 500
2024-07-16 22:51:38,020 total_step: 25000
2024-07-16 22:51:38,020 gate_weight_0: 1
2024-07-16 22:51:38,020 gate_weight_1: 2
2024-07-16 22:51:38,020 lr: 0.0001
2024-07-16 22:51:38,020 init_lr_num: 500
2024-07-16 22:51:38,020 lr_decay: 0.9
2024-07-16 22:51:38,020 lr_decay_interval: 400
2024-07-16 22:51:38,020 num_layers: 1
2024-07-16 22:51:38,020 d_model: 768
2024-07-16 22:51:38,020 dim_feedforward: 2048
2024-07-16 22:51:38,020 layer_norm_eps: 1e-05
2024-07-16 22:51:38,020 nhead: 8
2024-07-16 22:51:38,020 dropout: 0.1
2024-07-16 22:51:38,020 loss_list: kl_soft+kl_hard
2024-07-16 22:51:38,020 len_penalty_weight: 10
2024-07-16 22:51:38,020 soft_weight: 1
2024-07-16 22:51:38,020 hard_weight: 1
2024-07-16 22:51:38,020 do_sample: True
2024-07-16 22:51:38,020 temperature: 1e-09
2024-07-16 22:51:38,020 top_p: 0
2024-07-16 22:51:38,020 max_new_tokens: 40
2024-07-16 22:51:38,020 infer_add_gold_retrieval: False
2024-07-16 22:51:38,020 multi_query: False
2024-07-16 22:51:38,020 rewrite_num: 1
2024-07-16 22:51:38,020 chunk_size: 512
2024-07-16 22:51:38,020 chunk_overlap: 20
2024-07-16 22:51:38,020 if_hierarchical_retrieval: True
2024-07-16 22:51:38,020 hierarchical_ratio: 1.4
2024-07-16 22:51:38,020 quantile_num: 1
2024-07-16 22:51:38,020 n_docs: 10
2024-07-16 22:51:38,020 model_name_or_path: facebook/contriever-msmarco
2024-07-16 22:51:38,020 question_maxlength: 512
2024-07-16 22:51:38,020 passages: datasets/Retrieval_corpus/enwiki_2020_dec_intro_only.jsonl
2024-07-16 22:51:38,020 passages_embeddings: datasets/Retrieval_corpus/enwiki_dec_2020_contriever_intro/*
2024-07-16 22:51:38,020 lowercase: False
2024-07-16 22:51:38,020 normalize_text: False
2024-07-16 22:51:38,020 save_or_load_index: False
2024-07-16 22:51:38,020 no_fp16: True
2024-07-16 22:51:38,020 projection_size: 768
2024-07-16 22:51:38,020 n_subquantizers: 0
2024-07-16 22:51:38,020 n_bits: 8
2024-07-16 22:51:38,020 indexing_batch_size: 30000000
2024-07-16 22:51:38,020 device: cuda
2024-07-16 22:51:38,020 prompt_file: prompts/TriviaQA.json
2024-07-16 22:51:38,020 dir_path: ./results/output/ID_TriviaQA_1_gpu_7_RA_method_Only_RA_dataset_TriviaQA
2024-07-16 22:51:38,020 print_logger: <Logger print (DEBUG)>
2024-07-16 22:51:38,020 **************** Configuration **************** 


2024-07-16 22:51:38,020 Loading retriever ...
2024-07-16 22:52:25,959 Loading meta-llama/Meta-Llama-3-8B-Instruct in torch.bfloat16...
2024-07-16 22:52:31,492 Finish loading in 0.09 mins.
2024-07-16 22:52:32,522 Loading data ...
2024-07-16 22:52:33,811 prompt_format: retrieve-prompt 

2024-07-16 22:52:33,811 
 Start test ...  
2024-07-16 22:52:40,029 testing process num: 0
2024-07-16 23:03:27,256 testing process num: 200
2024-07-16 23:14:22,998 testing process num: 400
2024-07-16 23:25:33,085 testing process num: 600
2024-07-16 23:36:24,746 testing process num: 800
2024-07-16 23:47:03,788 testing process num: 1000
2024-07-16 23:58:01,232 testing process num: 1200
2024-07-17 00:08:42,646 testing process num: 1400
2024-07-17 00:09:34,195 test: f1 50.28, EM : 39.98, old_doc_len:0.0, new_doc_len:0.0
2024-07-17 00:09:34,196 cost_time: 77.00641091664632  
 
