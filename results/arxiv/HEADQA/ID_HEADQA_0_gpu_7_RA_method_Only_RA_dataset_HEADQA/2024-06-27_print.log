2024-06-27 11:31:06,355 **************** Configuration **************** 
2024-06-27 11:31:06,355 gpu: 7
2024-06-27 11:31:06,355 test_code_flag: False
2024-06-27 11:31:06,355 ID: HEADQA_0
2024-06-27 11:31:06,355 seed: 42
2024-06-27 11:31:06,355 num_workers: 48
2024-06-27 11:31:06,355 loading_ckpt_path: None
2024-06-27 11:31:06,355 RA_method: Only_RA
2024-06-27 11:31:06,355 LLM: meta-llama/Meta-Llama-3-8B-Instruct
2024-06-27 11:31:06,355 dataset: HEADQA
2024-06-27 11:31:06,355 train_batch_size: 2
2024-06-27 11:31:06,355 test_batch_size: 2
2024-06-27 11:31:06,355 accumulation_steps: 1
2024-06-27 11:31:06,355 demonstration: False
2024-06-27 11:31:06,355 demons_cnt: 1
2024-06-27 11:31:06,355 l2_coef: 0
2024-06-27 11:31:06,355 train_eval: 500
2024-06-27 11:31:06,356 epoch: 20
2024-06-27 11:31:06,356 gate_weight: 2
2024-06-27 11:31:06,356 lr: 0.0001
2024-06-27 11:31:06,356 init_lr_num: 500
2024-06-27 11:31:06,356 lr_decay: 0.9
2024-06-27 11:31:06,356 lr_decay_interval: 400
2024-06-27 11:31:06,356 num_layers: 1
2024-06-27 11:31:06,356 d_model: 768
2024-06-27 11:31:06,356 dim_feedforward: 2048
2024-06-27 11:31:06,356 layer_norm_eps: 1e-05
2024-06-27 11:31:06,356 nhead: 8
2024-06-27 11:31:06,356 dropout: 0.1
2024-06-27 11:31:06,356 loss_list: kl_soft+kl_hard
2024-06-27 11:31:06,356 len_penalty_weight: 10
2024-06-27 11:31:06,356 soft_weight: 1
2024-06-27 11:31:06,356 hard_weight: 1
2024-06-27 11:31:06,356 do_sample: True
2024-06-27 11:31:06,356 temperature: 1e-09
2024-06-27 11:31:06,356 top_p: 0
2024-06-27 11:31:06,356 max_new_tokens: 1
2024-06-27 11:31:06,356 infer_add_gold_retrieval: False
2024-06-27 11:31:06,356 multi_query: False
2024-06-27 11:31:06,356 rewrite_num: 1
2024-06-27 11:31:06,356 chunk_size: 512
2024-06-27 11:31:06,356 chunk_overlap: 20
2024-06-27 11:31:06,356 if_hierarchical_retrieval: False
2024-06-27 11:31:06,356 hierarchical_ratio: 1.4
2024-06-27 11:31:06,356 quantile_num: 0.99
2024-06-27 11:31:06,356 n_docs: 10
2024-06-27 11:31:06,356 model_name_or_path: facebook/contriever-msmarco
2024-06-27 11:31:06,357 question_maxlength: 512
2024-06-27 11:31:06,357 passages: datasets/Retrieval_corpus/enwiki_2020_dec_intro_only.jsonl
2024-06-27 11:31:06,357 passages_embeddings: datasets/Retrieval_corpus/enwiki_dec_2020_contriever_intro/*
2024-06-27 11:31:06,357 lowercase: False
2024-06-27 11:31:06,357 normalize_text: False
2024-06-27 11:31:06,357 save_or_load_index: False
2024-06-27 11:31:06,357 no_fp16: True
2024-06-27 11:31:06,357 projection_size: 768
2024-06-27 11:31:06,357 n_subquantizers: 0
2024-06-27 11:31:06,357 n_bits: 8
2024-06-27 11:31:06,357 indexing_batch_size: 30000000
2024-06-27 11:31:06,357 device: cuda
2024-06-27 11:31:06,357 prompt_file: prompts/HEADQA.json
2024-06-27 11:31:06,357 dir_path: ./results/output/ID_HEADQA_0_gpu_7_RA_method_Only_RA_dataset_HEADQA
2024-06-27 11:31:06,357 print_logger: <Logger print (DEBUG)>
2024-06-27 11:31:06,357 **************** Configuration **************** 


2024-06-27 11:31:06,357 Loading retriever ...
2024-06-27 11:32:01,325 Loading meta-llama/Meta-Llama-3-8B-Instruct in torch.bfloat16...
2024-06-27 11:32:08,433 Finish loading in 0.12 mins.
2024-06-27 11:32:09,306 Loading data ...
2024-06-27 11:32:09,502 prompt_format: retrieve-prompt 

2024-06-27 11:32:09,502 
 Start test ...  
2024-06-27 11:32:21,022 testing process num: 0
2024-06-27 11:33:45,298 testing process num: 200
2024-06-27 11:35:14,886 testing process num: 400
2024-06-27 11:36:42,019 testing process num: 600
2024-06-27 11:38:07,958 testing process num: 800
2024-06-27 11:39:33,097 testing process num: 1000
2024-06-27 11:41:05,141 testing process num: 1200
2024-06-27 11:42:20,224 test: acc 45.44, f1 44.01, precision 45.69, recall 67.86, old_doc_len:0.0, new_doc_len:0.0, hallucination: 3.14 
2024-06-27 11:42:20,224 cost_time: 10.178700339794158  
 
